<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>TTSP Solution : Schedule for each technician</title>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
			}
		</style>

		<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
		<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
		<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
		<script>
			am4core.ready(function() {
			am4core.useTheme(am4themes_animated);
			var chart = am4core.create("chartdiv", am4charts.XYChart);
			chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
			chart.paddingRight = 30;

			chart.data = [
				{
					name: 1,
					team_number: 1,
					day: 1,
					intervention : 4,
					startTime: 60,
					fromDate: 60,
					toDate: 75,
					color: "#FFD700"
				}
				,{
					name: 1,
					team_number: 1,
					day: 1,
					intervention : 5,
					startTime: 0,
					fromDate: 0,
					toDate: 60,
					color: "#FF0000"
				}
				,{
					name: 3,
					team_number: 1,
					day: 1,
					intervention : 4,
					startTime: 60,
					fromDate: 60,
					toDate: 75,
					color: "#FFD700"
				}
				,{
					name: 3,
					team_number: 1,
					day: 1,
					intervention : 5,
					startTime: 0,
					fromDate: 0,
					toDate: 60,
					color: "#FF0000"
				}
				,{
					name: 4,
					team_number: 2,
					day: 1,
					intervention : 1,
					startTime: 0,
					fromDate: 0,
					toDate: 60,
					color: "#FF0000"
				}
				,{
					name: 4,
					team_number: 2,
					day: 1,
					intervention : 2,
					startTime: 60,
					fromDate: 60,
					toDate: 120,
					color: "#90EE90"
				}
				,{
					name: 5,
					team_number: 3,
					day: 1,
					intervention : 3,
					startTime: 0,
					fromDate: 0,
					toDate: 15,
					color: "#FF0000"
				}
			];
			var title = chart.titles.create();
			title.text = "[bold]Individual schedule for each technician[/]";
			title.fontSize = 25;
			title.marginBottom = 30;

			var categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis());
			categoryAxis.dataFields.category = "name";
			categoryAxis.renderer.grid.template.location = 0;
			categoryAxis.renderer.inversed = true;
			categoryAxis.title.text = "Technicians";
			categoryAxis.title.fontWeight = "bold";
			categoryAxis.renderer.labels.template.fontSize = 14;

			var valueAxis = chart.xAxes.push(new am4charts.ValueAxis());
			valueAxis.min = 0;
			valueAxis.max = 120;
			valueAxis.strictMinMax = true;
			valueAxis.title.text = "Date";
			valueAxis.title.fontWeight = "bold";
			valueAxis.renderer.labels.template.fontSize = 14;

			var series = chart.series.push(new am4charts.ColumnSeries());
			series.columns.template.width = am4core.percent(80);

			series.columns.template.tooltipText = "[bold]Intervention #{intervention} :[/]  from time {startTime} on day {day} (cumulative time: from {openValueX} to {valueX})\n[bold]Team #{team_number}[/]";
			series.dataFields.openValueX = "fromDate";
			series.dataFields.valueX = "toDate";
			series.dataFields.categoryY = "name";
			series.columns.template.propertyFields.stroke = "black";
			series.columns.template.propertyFields.fill = "color";
			series.columns.template.strokeOpacity = 100;

			var label = series.columns.template.createChild(am4core.Label);
			label.text = "{intervention}";
			label.align = "center";
			label.valign = "middle";
			label.fill = "black";

			var legend = new am4charts.Legend();
			legend.parent = chart.chartContainer;
			legend.y = am4core.percent(100);
			legend.position = "bottom";
			legend.contentAlign = "center";
			legend.fontSize = 14;
			legend.padding(10, 15, 10, 15);
			legend.data = [{
				"name": "Priority 1",
				"fill":"#FF0000"
			}, {
				"name": "Priority 2",
				"fill": "#FFD700"
			}, {
				"name": "Priority 3",
				"fill": "#90EE90"
			}, {
				"name": "Priority >3",
				"fill": "#33b2ff"
			}
];
			legend.itemContainers.template.clickable = false;
			legend.itemContainers.template.focusable = false;
			chart.scrollbarX = new am4core.Scrollbar();

		});
		</script>
	</head>
	<body>
		<div id="chartdiv" style="height: 400px;width: 100%;"></div>
	</body>
</html>
